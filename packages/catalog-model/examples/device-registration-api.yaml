apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: device-registration-api
  description: Stores registrations of client devices to allow events to be sent to them
spec:
  type: openapi
  definition: |
    openapi: 3.0.0
    info:
      description: >-
        A collection of endpoints that allows devices to register for notifications and for the registered devices to be
        managed.
      title: Workspace Device Registration
      version: 0.0.1
    paths:
      /devices:
        get:
          parameters:
            - description: The unique identifier of the customer in whose context the request is being made.
              in: header
              name: Citrix-CustomerId
              required: true
              schema:
                type: string
            - description: The unique identifier of the store in which context the request is being made.
              in: header
              name: Citrix-InstanceId
              required: true
              schema:
                type: string
            - description: The unique identifier of the user in whose context the request is being made.
              in: header
              name: Citrix-UserId
              required: false
              schema:
                type: string
            - description: The type of devices to return.
              in: query
              name: type
              schema:
                type: string
          responses:
            '200':
              content:
                application/json:
                  example:
                    items:
                      - id: AhdUMpPhNFISlRVAjF
                        name: John's Work Phone
                        os:
                          type: ios
                          version: 12.0.1
                        properties:
                          screen_height: '2436'
                          screen_width: '1125'
                          language: fr
                        type: mobile
                        updated_at: '2019-09-24 08:28:02+00:00'
                        created_at: '2019-09-24 08:28:02+00:00'
                      - id: OubciROSROuRjMuToA
                        name: John's Home Tablet
                        os:
                          type: android
                          version: 9.1.1
                        properties:
                          screen_height: '2388'
                          screen_width: '1668'
                          language: en-gb
                        type: mobile
                        updated_at: '2019-09-24 08:28:02+00:00'
                        created_at: '2019-09-24 08:28:02+00:00'
                  schema:
                    properties:
                      items:
                        items:
                          properties:
                            created_at:
                              type: string
                              format: date-time
                            id:
                              type: string
                            name:
                              type: string
                            os:
                              properties:
                                type:
                                  enum:
                                    - android
                                    - ios
                                    - linux
                                    - mac
                                    - windows
                                  type: string
                                version:
                                  type: string
                              type: object
                            properties:
                              additionalProperties:
                                description: >-
                                  A collection of additional metadata describing the device. If a language is specified in
                                  the collection of  properties the value must adhere to BCP 47 from the IETF
                                  (https://tools.ietf.org/html/bcp47).
                                type: string
                              type: object
                            type:
                              enum:
                                - desktop
                                - mobile
                                - web
                              type: string
                            updated_at:
                              type: string
                              format: date-time
                          type: object
                        type: array
                    type: object
              description: A collection of devices matching the supplied parameters.
            '400':
              content:
                application/json:
                  example:
                    detail: A value is required and must be supplied.
                    type: 'https://errors-api.cloud.com/common/missing'
                    parameters:
                      - property: os.type
                  schema:
                    properties:
                      detail:
                        description: 'A human-readable description of the error that occurred, localized into the caller''s language.'
                        type: string
                      parameters:
                        additionalProperties:
                          description: >-
                            Additional properties that an automated client may need in order to properly detect and handle
                            the error.
                          type: string
                      type:
                        description: 'A URI reference [RFC3986] that identifies the problem type.'
                        format: uri
                        type: string
                    required:
                      - detail
                      - type
                    type: object
              description: The error that was encountered whilst handling the request.
            '401':
              description: Authentication information is missing or is invalid.
              headers:
                WWW-Authenticate:
                  schema:
                    type: string
                  description: The security challenge issued in response to an un-authenticated request.
          security:
            - citrixAuth: []
          summary: Retrieve a collection of devices matching the supplied parameters.
          tags:
            - User
        post:
          parameters:
            - description: The unique identifier of the customer in whose context the request is being made.
              in: header
              name: Citrix-CustomerId
              required: true
              schema:
                type: string
            - description: The unique identifier of the store in which context the request is being made.
              in: header
              name: Citrix-InstanceId
              required: true
              schema:
                type: string
            - description: The unique identifier of the user in whose context the request is being made.
              in: header
              name: Citrix-UserId
              required: false
              schema:
                type: string
          requestBody:
            description: A representation of the characteristics of a device.
            content:
              application/json:
                example:
                  application:
                    applicationIdentifier: Com.citrix.intelligentworkspace
                    version: 1.0.1
                  deliveryType: pns
                  formFactor: tablet
                  id: OubciROSROuRjMuToA
                  name: John's Home Tablet
                  os:
                    type: android
                    version: 9.1.1
                  properties:
                    screen_height: '2388'
                    screen_width: '1668'
                    language: en-gb
                  token: rCtrwKLStMM3dYTSusratUXfeWoWHjwbxemZKq5wJ6eTkeUNf6PhOLRz3phTC0ws
                  type: mobile
                schema:
                  properties:
                    application:
                      properties:
                        applicationIdentifier:
                          type: string
                        name:
                          type: string
                        version:
                          type: string
                      required:
                        - applicationIdentifier
                      type: object
                    deliveryType:
                      enum:
                        - pns
                        - realTime
                      type: string
                    formFactor:
                      type: string
                    id:
                      type: string
                    name:
                      type: string
                    os:
                      properties:
                        type:
                          enum:
                            - android
                            - ios
                            - linux
                            - mac
                            - windows
                          type: string
                        version:
                          type: string
                      required:
                        - type
                      type: object
                    properties:
                      additionalProperties:
                        description: >-
                          A collection of additional metadata describing the device. If a language is specified in the
                          collection of  properties the value must adhere to BCP 47 from the IETF
                          (https://tools.ietf.org/html/bcp47).
                        type: string
                      type: object
                    token:
                      type: string
                    type:
                      enum:
                        - desktop
                        - mobile
                        - web
                      type: string
                  required:
                    - deliveryType
                    - name
                    - token
                    - type
                  type: object
            required: true
          responses:
            '201':
              content:
                application/json:
                  example:
                    id: AhdUMpPhNFISlRVAjF
                  schema:
                    properties:
                      id:
                        type: string
                    required:
                      - id
                    type: object
              description: The details of a successful registration of a device.
            '204':
              description: An existing registration for this device was found and has been updated.
            '400':
              content:
                application/json:
                  example:
                    detail: A value is required and must be supplied.
                    type: 'https://errors-api.cloud.com/common/missing'
                    parameters:
                      - property: os.type
                  schema:
                    properties:
                      detail:
                        description: 'A human-readable description of the error that occurred, localized into the caller''s language.'
                        type: string
                      parameters:
                        additionalProperties:
                          description: >-
                            Additional properties that an automated client may need in order to properly detect and handle
                            the error.
                          type: string
                      type:
                        description: 'A URI reference [RFC3986] that identifies the problem type.'
                        format: uri
                        type: string
                    required:
                      - detail
                      - type
                    type: object
              description: The error that was encountered whilst handling the request.
            '401':
              description: Authentication information is missing or is invalid.
              headers:
                WWW-Authenticate:
                  schema:
                    type: string
                  description: The security challenge issued in response to an un-authenticated request.
          security:
            - citrixAuth: []
          summary: Register a new device
          tags:
            - User
      '/devices/{id}/registrations/{applicationIdentifier}':
        delete:
          parameters:
            - description: The unique identifier of the customer in whose context the request is being made.
              in: header
              name: Citrix-CustomerId
              required: true
              schema:
                type: string
            - description: The unique identifier of the store in which context the request is being made.
              in: header
              name: Citrix-InstanceId
              required: true
              schema:
                type: string
            - description: The unique identifier of the user in whose context the request is being made.
              in: header
              name: Citrix-UserId
              required: false
              schema:
                type: string
            - description: The unique identifier of the application.
              in: path
              name: applicationIdentifier
              required: true
              schema:
                type: string
            - description: The unique identifier of the device to be de-registered.
              in: path
              name: id
              required: true
              schema:
                type: string
          responses:
            '204':
              description: The device will no longer receive notifications for the specified application.
            '400':
              content:
                application/json:
                  example:
                    detail: A value is required and must be supplied.
                    type: 'https://errors-api.cloud.com/common/missing'
                    parameters:
                      - property: os.type
                  schema:
                    properties:
                      detail:
                        description: 'A human-readable description of the error that occurred, localized into the caller''s language.'
                        type: string
                      parameters:
                        additionalProperties:
                          description: >-
                            Additional properties that an automated client may need in order to properly detect and handle
                            the error.
                          type: string
                      type:
                        description: 'A URI reference [RFC3986] that identifies the problem type.'
                        format: uri
                        type: string
                    required:
                      - detail
                      - type
                    type: object
              description: The error that was encountered whilst handling the request.
            '401':
              description: Authentication information is missing or is invalid.
              headers:
                WWW-Authenticate:
                  schema:
                    type: string
                  description: The security challenge issued in response to an un-authenticated request.
          security:
            - citrixAuth: []
          summary: Remove an application's registration for notifications from the specified device.
          tags:
            - User
      /endpoints:
        get:
          responses:
            '200':
              content:
                application/xml:
                  example: |
                    <?xml version="1.0" encoding="utf-8"?>
                    <endpoints xmlns="http://citrix.com/deliveryservices/1-0/endpoints">
                      <endpoint id="DeviceManagement">
                        <capabilities>
                          <capability>DeviceRegistration</capability>
                          <capability>DeviceEnumeration</capability>
                        </capabilities>
                        <url>https://device-registration.iws.cloud.com/Devices</url>
                      </endpoint>
                      <endpoint id="DeviceDeregistration">
                        <capabilities>
                            <capability>DeregisterDevice</capability>
                        </capabilities>
                        <url>https://device-registration.iws.cloud.com/Devices/{id}</url>
                      </endpoint>
                      <endpoint id="ApplicationDeregistration">
                        <capabilities>
                            <capability>DeregisterApplication</capability>
                        </capabilities>
                        <url>https://device-registration.iws.cloud.com/Devices/{id}/registrations/{applicationIdentifier}</url>
                      </endpoint>
                      <endpoint id="AzureSignalRService">
                        <capabilities />
                        <url>https://wsp-pes.service.signalr.net</url>
                      </endpoint>
                      <endpoint id="SignalRHub">
                        <capabilities>
                            <capability>SignalRConnectionNegotiation</capability>
                        </capabilities>
                        <url>http://push-events-service-signalrsender.iws.cloud.com/negotiate</url>
                      </endpoint>
                    </endpoints>
                  schema:
                    items:
                      properties:
                        endpoint:
                          properties:
                            capabilities:
                              items:
                                properties:
                                  capability:
                                    type: string
                                type: object
                              type: array
                            id:
                              type: string
                              xml:
                                attribute: true
                            url:
                              type: string
                          type: object
                      type: object
                    type: array
                    xml:
                      prefix: xmlns
                      namespace: 'http://citrix.com/dazzleservices/2-0/endpoints'
              description: The collection of available endpoints with their capabilities.
          summary: The collection of available endpoints.
          tags:
            - Discovery
      /status/connect:
        get:
          responses:
            '200':
              content:
                application/json:
                  example:
                    branch: master
                    commit: 0c972d37e55dd660c156ff8802b3d4bf302ae3d9
                    component: device registration service
                    product: wsp
                    schemaVersion: 2
                    timestamp: '2018-09-21T15:55:30Z'
                    version: 0.0.1
                  schema:
                    properties:
                      branch:
                        type: string
                      commit:
                        type: string
                      component:
                        type: string
                      product:
                        type: string
                      schemaVersion:
                        type: integer
                      timestamp:
                        type: string
                        format: date-time
                      version:
                        type: string
                    type: object
              description: The details of the service.
            '521':
              description: The service is unhealthy and will no longer be accepting traffic.
          summary: >-
            Connectivity Endpoint - determines if a dependent component is able to reach this component and is not blocked
            by firewalls or routing issues. Must not call other dependencies.
          tags:
            - Health
      /status/dependencies:
        get:
          responses:
            '200':
              content:
                application/json:
                  example:
                    branch: master
                    commit: 0c972d37e55dd660c156ff8802b3d4bf302ae3d9
                    component: device registration service
                    description: Provides a mechanism for devices to register for services.
                    product: wsp
                    ring: 1
                    schemaVersion: 2
                    dependencies:
                      - product: azure-cosmosdb
                        component: cassandra
                        ring: 1
                        reason: Stores devices and registrations
                      - product: azure-notificationhub
                        component: desktop-hub
                        ring: 1
                        reason: Stores registrations of devices for native notifications.
                      - product: azure-notificationhub
                        component: mobile-hub
                        ring: 1
                        reason: Stores registrations of devices for native notifications.
                    timestamp: '2018-09-21T15:55:30Z'
                    version: 0.0.1
                  schema:
                    allOf:
                      - properties:
                          branch:
                            type: string
                          commit:
                            type: string
                          component:
                            type: string
                          product:
                            type: string
                          schemaVersion:
                            type: integer
                          timestamp:
                            type: string
                            format: date-time
                          version:
                            type: string
                        type: object
                      - properties:
                          dependencies:
                            type: array
                            items:
                              properties:
                                component:
                                  type: string
                                product:
                                  type: string
                                reason:
                                  type: string
                                ring:
                                  type: integer
                              type: object
                          description:
                            type: string
                          ring:
                            type: integer
                        type: object
              description: The details of the service instance.
            '521':
              description: The service is not available.
          summary: Identifies whether the service instance has been deployed and configured correctly.
          tags:
            - Health
      /status/instance:
        get:
          responses:
            '200':
              content:
                application/json:
                  example:
                    branch: master
                    commit: 0c972d37e55dd660c156ff8802b3d4bf302ae3d9
                    component: device registration service
                    description: Provides a mechanism for devices to register for services.
                    hostname: device-registration-host-58cb67df-27b57
                    httpStatusCode: 200
                    product: wsp
                    ring: 1
                    schemaVersion: 2
                    services:
                      - product: azure-cosmosdb
                        component: cassandra
                        success: true
                        requiredService: true
                        subStatusCode: 200
                      - product: azure-notificationhub
                        component: desktop-hub
                        success: true
                        requiredService: false
                        subStatusCode: 200
                      - product: azure-notificationhub
                        component: mobile-hub
                        success: true
                        requiredService: false
                        subStatusCode: 200
                    success: true
                    timestamp: '2018-09-21T15:55:30Z'
                    version: 0.0.1
                  schema:
                    allOf:
                      - properties:
                          branch:
                            type: string
                          commit:
                            type: string
                          component:
                            type: string
                          product:
                            type: string
                          schemaVersion:
                            type: integer
                          timestamp:
                            type: string
                            format: date-time
                          version:
                            type: string
                        type: object
                      - properties:
                          description:
                            type: string
                          hostname:
                            type: string
                          httpStatusCode:
                            type: integer
                          services:
                            type: array
                            items:
                              properties:
                                component:
                                  type: string
                                product:
                                  type: string
                                requiredService:
                                  type: boolean
                                subStatusCode:
                                  type: integer
                                success:
                                  type: boolean
                              type: object
                          ring:
                            type: integer
                          success:
                            type: boolean
                        type: object
              description: The details of the service instance.
            '521':
              description: The service is unhealthy and will no longer be accepting traffic.
          summary: >-
            [DEPRECATED - replaced by status/instance/readiness, status/instance/liveness and status/connect depending on
            use case]: Identifies whether the service instance can accept new requests.
          tags:
            - Health
      /status/instance/liveness:
        get:
          responses:
            '200':
              content:
                application/json:
                  example:
                    branch: master
                    commit: 0c972d37e55dd660c156ff8802b3d4bf302ae3d9
                    component: device registration service
                    description: Provides a mechanism for devices to register for services.
                    hostname: device-registration-host-58cb67df-27b57
                    httpStatusCode: 200
                    product: wsp
                    ring: 1
                    schemaVersion: 2
                    services:
                      - product: azure-cosmosdb
                        component: cassandra
                        success: true
                        requiredService: true
                        subStatusCode: 200
                      - product: azure-notificationhub
                        component: desktop-hub
                        success: true
                        requiredService: false
                        subStatusCode: 200
                      - product: azure-notificationhub
                        component: mobile-hub
                        success: true
                        requiredService: false
                        subStatusCode: 200
                    success: true
                    timestamp: '2018-09-21T15:55:30Z'
                    version: 0.0.1
                  schema:
                    allOf:
                      - properties:
                          branch:
                            type: string
                          commit:
                            type: string
                          component:
                            type: string
                          product:
                            type: string
                          schemaVersion:
                            type: integer
                          timestamp:
                            type: string
                            format: date-time
                          version:
                            type: string
                        type: object
                      - properties:
                          description:
                            type: string
                          hostname:
                            type: string
                          httpStatusCode:
                            type: integer
                          services:
                            type: array
                            items:
                              properties:
                                component:
                                  type: string
                                product:
                                  type: string
                                requiredService:
                                  type: boolean
                                subStatusCode:
                                  type: integer
                                success:
                                  type: boolean
                              type: object
                          ring:
                            type: integer
                          success:
                            type: boolean
                        type: object
              description: The details of the service instance.
            '521':
              description: The service is unhealthy and will no longer be accepting traffic.
          summary: Instance Liveness Endpoint - monitors whether the service instance is healthy. Should not check dependencies.
          tags:
            - Health
      /status/instance/readiness:
        get:
          responses:
            '200':
              content:
                application/json:
                  example:
                    branch: master
                    commit: 0c972d37e55dd660c156ff8802b3d4bf302ae3d9
                    component: device registration service
                    description: Provides a mechanism for devices to register for services.
                    hostname: device-registration-host-58cb67df-27b57
                    httpStatusCode: 200
                    product: wsp
                    ring: 1
                    schemaVersion: 2
                    services:
                      - product: azure-cosmosdb
                        component: cassandra
                        success: true
                        requiredService: true
                        subStatusCode: 200
                      - product: azure-notificationhub
                        component: desktop-hub
                        success: true
                        requiredService: false
                        subStatusCode: 200
                      - product: azure-notificationhub
                        component: mobile-hub
                        success: true
                        requiredService: false
                        subStatusCode: 200
                    success: true
                    timestamp: '2018-09-21T15:55:30Z'
                    version: 0.0.1
                  schema:
                    allOf:
                      - properties:
                          branch:
                            type: string
                          commit:
                            type: string
                          component:
                            type: string
                          product:
                            type: string
                          schemaVersion:
                            type: integer
                          timestamp:
                            type: string
                            format: date-time
                          version:
                            type: string
                        type: object
                      - properties:
                          description:
                            type: string
                          hostname:
                            type: string
                          httpStatusCode:
                            type: integer
                          services:
                            type: array
                            items:
                              properties:
                                component:
                                  type: string
                                product:
                                  type: string
                                requiredService:
                                  type: boolean
                                subStatusCode:
                                  type: integer
                                success:
                                  type: boolean
                              type: object
                          ring:
                            type: integer
                          success:
                            type: boolean
                        type: object
              description: The details of the service instance.
            '521':
              description: The service is unhealthy and will no longer be accepting traffic.
          summary: >-
            Instance Readiness Endpoint - monitors whether the service instance can accept new requests. (Checks critical
            dependencies, configuration validation, schema validation, load validation etc.)
          tags:
            - Health
      /status/up:
        get:
          responses:
            '200':
              content:
                application/json:
                  example:
                    branch: master
                    commit: 0c972d37e55dd660c156ff8802b3d4bf302ae3d9
                    component: device registration service
                    product: wsp
                    schemaVersion: 2
                    timestamp: '2018-09-21T15:55:30Z'
                    version: 0.0.1
                  schema:
                    properties:
                      branch:
                        type: string
                      commit:
                        type: string
                      component:
                        type: string
                      product:
                        type: string
                      schemaVersion:
                        type: integer
                      timestamp:
                        type: string
                        format: date-time
                      version:
                        type: string
                    type: object
              description: The details of the service instance.
            '550':
              description: The service is not available.
          summary: Identifies whether the service is available.
          tags:
            - Health
    tags:
      - name: Discovery
      - description: User administration of their devices.
        name: User
      - name: Health
    components:
      parameters:
        'headers:instanceId':
          description: The unique identifier of the store in which context the request is being made.
          in: header
          name: citrix-InstanceId
          schema:
            type: string
        'headers:userId':
          description: The unique identifier of the user in whose context the request is being made.
          in: header
          name: Citrix-UserId
          required: false
          schema:
            type: string
        'headers:required:customerId':
          description: The unique identifier of the customer in whose context the request is being made.
          in: header
          name: Citrix-CustomerId
          required: true
          schema:
            type: string
        'headers:required:instanceId':
          description: The unique identifier of the store in which context the request is being made.
          in: header
          name: Citrix-InstanceId
          required: true
          schema:
            type: string
        'headers:required:userId':
          description: The unique identifier of the user in whose context the request is being made.
          in: header
          name: Citrix-UserId
          required: true
          schema:
            type: string
        'path:applicationIdentifier':
          description: The unique identifier of the application.
          in: path
          name: applicationIdentifier
          required: true
          schema:
            type: string
        'path:customerId':
          description: The unique identifier of the customer in whose context the request should be made.
          in: path
          name: customer
          required: true
          schema:
            type: string
        'path:deviceId':
          description: The unique identifier of the device to be de-registered.
          in: path
          name: id
          required: true
          schema:
            type: string
        'path:userId':
          description: The unique identifier of the user in whose context the request should be made.
          in: path
          name: user
          required: true
          schema:
            type: string
        'query:type':
          description: The type of devices to return.
          in: query
          name: type
          schema:
            type: string
        'query:userId':
          description: The unique identifier of the user whose devices should be returned.
          in: query
          name: userId
          schema:
            type: string
      requestBodies:
        device:
          description: A representation of the characteristics of a device.
          content:
            application/json:
              example:
                application:
                  applicationIdentifier: Com.citrix.intelligentworkspace
                  version: 1.0.1
                deliveryType: pns
                formFactor: tablet
                id: OubciROSROuRjMuToA
                name: John's Home Tablet
                os:
                  type: android
                  version: 9.1.1
                properties:
                  screen_height: '2388'
                  screen_width: '1668'
                  language: en-gb
                token: rCtrwKLStMM3dYTSusratUXfeWoWHjwbxemZKq5wJ6eTkeUNf6PhOLRz3phTC0ws
                type: mobile
              schema:
                properties:
                  application:
                    properties:
                      applicationIdentifier:
                        type: string
                      name:
                        type: string
                      version:
                        type: string
                    required:
                      - applicationIdentifier
                    type: object
                  deliveryType:
                    enum:
                      - pns
                      - realTime
                    type: string
                  formFactor:
                    type: string
                  id:
                    type: string
                  name:
                    type: string
                  os:
                    properties:
                      type:
                        enum:
                          - android
                          - ios
                          - linux
                          - mac
                          - windows
                        type: string
                      version:
                        type: string
                    required:
                      - type
                    type: object
                  properties:
                    additionalProperties:
                      description: >-
                        A collection of additional metadata describing the device. If a language is specified in the
                        collection of  properties the value must adhere to BCP 47 from the IETF
                        (https://tools.ietf.org/html/bcp47).
                      type: string
                    type: object
                  token:
                    type: string
                  type:
                    enum:
                      - desktop
                      - mobile
                      - web
                    type: string
                required:
                  - deliveryType
                  - name
                  - token
                  - type
                type: object
          required: true
      responses:
        device:
          content:
            text/plain:
              example: AhdUMpPhNFISlRVAjF
              schema:
                type: string
          description: The device has been registered.
        endpoints:
          content:
            application/xml:
              example: |
                <?xml version="1.0" encoding="utf-8"?>
                <endpoints xmlns="http://citrix.com/deliveryservices/1-0/endpoints">
                  <endpoint id="DeviceManagement">
                    <capabilities>
                      <capability>DeviceRegistration</capability>
                      <capability>DeviceEnumeration</capability>
                    </capabilities>
                    <url>https://device-registration.iws.cloud.com/Devices</url>
                  </endpoint>
                  <endpoint id="DeviceDeregistration">
                    <capabilities>
                        <capability>DeregisterDevice</capability>
                    </capabilities>
                    <url>https://device-registration.iws.cloud.com/Devices/{id}</url>
                  </endpoint>
                  <endpoint id="ApplicationDeregistration">
                    <capabilities>
                        <capability>DeregisterApplication</capability>
                    </capabilities>
                    <url>https://device-registration.iws.cloud.com/Devices/{id}/registrations/{applicationIdentifier}</url>
                  </endpoint>
                  <endpoint id="AzureSignalRService">
                    <capabilities />
                    <url>https://wsp-pes.service.signalr.net</url>
                  </endpoint>
                  <endpoint id="SignalRHub">
                    <capabilities>
                        <capability>SignalRConnectionNegotiation</capability>
                    </capabilities>
                    <url>http://push-events-service-signalrsender.iws.cloud.com/negotiate</url>
                  </endpoint>
                </endpoints>
              schema:
                items:
                  properties:
                    endpoint:
                      properties:
                        capabilities:
                          items:
                            properties:
                              capability:
                                type: string
                            type: object
                          type: array
                        id:
                          type: string
                          xml:
                            attribute: true
                        url:
                          type: string
                      type: object
                  type: object
                type: array
                xml:
                  prefix: xmlns
                  namespace: 'http://citrix.com/dazzleservices/2-0/endpoints'
          description: The collection of available endpoints with their capabilities.
        error:
          content:
            application/json:
              example:
                detail: A value is required and must be supplied.
                type: 'https://errors-api.cloud.com/common/missing'
                parameters:
                  - property: os.type
              schema:
                properties:
                  detail:
                    description: 'A human-readable description of the error that occurred, localized into the caller''s language.'
                    type: string
                  parameters:
                    additionalProperties:
                      description: >-
                        Additional properties that an automated client may need in order to properly detect and handle the
                        error.
                      type: string
                  type:
                    description: 'A URI reference [RFC3986] that identifies the problem type.'
                    format: uri
                    type: string
                required:
                  - detail
                  - type
                type: object
          description: The error that was encountered whilst handling the request.
        listOfDevices:
          content:
            application/json:
              example:
                items:
                  - id: AhdUMpPhNFISlRVAjF
                    name: John's Work Phone
                    os:
                      type: ios
                      version: 12.0.1
                    properties:
                      screen_height: '2436'
                      screen_width: '1125'
                      language: fr
                    type: mobile
                    updated_at: '2019-09-24 08:28:02+00:00'
                    created_at: '2019-09-24 08:28:02+00:00'
                  - id: OubciROSROuRjMuToA
                    name: John's Home Tablet
                    os:
                      type: android
                      version: 9.1.1
                    properties:
                      screen_height: '2388'
                      screen_width: '1668'
                      language: en-gb
                    type: mobile
                    updated_at: '2019-09-24 08:28:02+00:00'
                    created_at: '2019-09-24 08:28:02+00:00'
              schema:
                properties:
                  items:
                    items:
                      properties:
                        created_at:
                          type: string
                          format: date-time
                        id:
                          type: string
                        name:
                          type: string
                        os:
                          properties:
                            type:
                              enum:
                                - android
                                - ios
                                - linux
                                - mac
                                - windows
                              type: string
                            version:
                              type: string
                          type: object
                        properties:
                          additionalProperties:
                            description: >-
                              A collection of additional metadata describing the device. If a language is specified in the
                              collection of  properties the value must adhere to BCP 47 from the IETF
                              (https://tools.ietf.org/html/bcp47).
                            type: string
                          type: object
                        type:
                          enum:
                            - desktop
                            - mobile
                            - web
                          type: string
                        updated_at:
                          type: string
                          format: date-time
                      type: object
                    type: array
                type: object
          description: A collection of devices matching the supplied parameters.
        registrationResponse:
          content:
            application/json:
              example:
                id: AhdUMpPhNFISlRVAjF
              schema:
                properties:
                  id:
                    type: string
                required:
                  - id
                type: object
          description: The details of a successful registration of a device.
        'status:connect':
          content:
            application/json:
              example:
                branch: master
                commit: 0c972d37e55dd660c156ff8802b3d4bf302ae3d9
                component: device registration service
                product: wsp
                schemaVersion: 2
                timestamp: '2018-09-21T15:55:30Z'
                version: 0.0.1
              schema:
                properties:
                  branch:
                    type: string
                  commit:
                    type: string
                  component:
                    type: string
                  product:
                    type: string
                  schemaVersion:
                    type: integer
                  timestamp:
                    type: string
                    format: date-time
                  version:
                    type: string
                type: object
          description: The details of the service.
        'status:dependencies':
          content:
            application/json:
              example:
                branch: master
                commit: 0c972d37e55dd660c156ff8802b3d4bf302ae3d9
                component: device registration service
                description: Provides a mechanism for devices to register for services.
                product: wsp
                ring: 1
                schemaVersion: 2
                dependencies:
                  - product: azure-cosmosdb
                    component: cassandra
                    ring: 1
                    reason: Stores devices and registrations
                  - product: azure-notificationhub
                    component: desktop-hub
                    ring: 1
                    reason: Stores registrations of devices for native notifications.
                  - product: azure-notificationhub
                    component: mobile-hub
                    ring: 1
                    reason: Stores registrations of devices for native notifications.
                timestamp: '2018-09-21T15:55:30Z'
                version: 0.0.1
              schema:
                allOf:
                  - properties:
                      branch:
                        type: string
                      commit:
                        type: string
                      component:
                        type: string
                      product:
                        type: string
                      schemaVersion:
                        type: integer
                      timestamp:
                        type: string
                        format: date-time
                      version:
                        type: string
                    type: object
                  - properties:
                      dependencies:
                        type: array
                        items:
                          properties:
                            component:
                              type: string
                            product:
                              type: string
                            reason:
                              type: string
                            ring:
                              type: integer
                          type: object
                      description:
                        type: string
                      ring:
                        type: integer
                    type: object
          description: The details of the service instance.
        'status:instance':
          content:
            application/json:
              example:
                branch: master
                commit: 0c972d37e55dd660c156ff8802b3d4bf302ae3d9
                component: device registration service
                description: Provides a mechanism for devices to register for services.
                hostname: device-registration-host-58cb67df-27b57
                httpStatusCode: 200
                product: wsp
                ring: 1
                schemaVersion: 2
                services:
                  - product: azure-cosmosdb
                    component: cassandra
                    success: true
                    requiredService: true
                    subStatusCode: 200
                  - product: azure-notificationhub
                    component: desktop-hub
                    success: true
                    requiredService: false
                    subStatusCode: 200
                  - product: azure-notificationhub
                    component: mobile-hub
                    success: true
                    requiredService: false
                    subStatusCode: 200
                success: true
                timestamp: '2018-09-21T15:55:30Z'
                version: 0.0.1
              schema:
                allOf:
                  - properties:
                      branch:
                        type: string
                      commit:
                        type: string
                      component:
                        type: string
                      product:
                        type: string
                      schemaVersion:
                        type: integer
                      timestamp:
                        type: string
                        format: date-time
                      version:
                        type: string
                    type: object
                  - properties:
                      description:
                        type: string
                      hostname:
                        type: string
                      httpStatusCode:
                        type: integer
                      services:
                        type: array
                        items:
                          properties:
                            component:
                              type: string
                            product:
                              type: string
                            requiredService:
                              type: boolean
                            subStatusCode:
                              type: integer
                            success:
                              type: boolean
                          type: object
                      ring:
                        type: integer
                      success:
                        type: boolean
                    type: object
          description: The details of the service instance.
        'status:up':
          content:
            application/json:
              example:
                branch: master
                commit: 0c972d37e55dd660c156ff8802b3d4bf302ae3d9
                component: device registration service
                product: wsp
                schemaVersion: 2
                timestamp: '2018-09-21T15:55:30Z'
                version: 0.0.1
              schema:
                properties:
                  branch:
                    type: string
                  commit:
                    type: string
                  component:
                    type: string
                  product:
                    type: string
                  schemaVersion:
                    type: integer
                  timestamp:
                    type: string
                    format: date-time
                  version:
                    type: string
                type: object
          description: The details of the service instance.
        unauthorized:
          description: Authentication information is missing or is invalid.
          headers:
            WWW-Authenticate:
              schema:
                type: string
              description: The security challenge issued in response to an un-authenticated request.
      schemas:
        device:
          properties:
            application:
              properties:
                applicationIdentifier:
                  type: string
                name:
                  type: string
                version:
                  type: string
              required:
                - applicationIdentifier
              type: object
            deliveryType:
              enum:
                - pns
                - realTime
              type: string
            formFactor:
              type: string
            id:
              type: string
            name:
              type: string
            os:
              properties:
                type:
                  enum:
                    - android
                    - ios
                    - linux
                    - mac
                    - windows
                  type: string
                version:
                  type: string
              required:
                - type
              type: object
            properties:
              additionalProperties:
                description: >-
                  A collection of additional metadata describing the device. If a language is specified in the collection
                  of  properties the value must adhere to BCP 47 from the IETF (https://tools.ietf.org/html/bcp47).
                type: string
              type: object
            token:
              type: string
            type:
              enum:
                - desktop
                - mobile
                - web
              type: string
          required:
            - deliveryType
            - name
            - token
            - type
          type: object
        endpoints:
          items:
            properties:
              endpoint:
                properties:
                  capabilities:
                    items:
                      properties:
                        capability:
                          type: string
                      type: object
                    type: array
                  id:
                    type: string
                    xml:
                      attribute: true
                  url:
                    type: string
                type: object
            type: object
          type: array
          xml:
            prefix: xmlns
            namespace: 'http://citrix.com/dazzleservices/2-0/endpoints'
        error:
          properties:
            detail:
              description: 'A human-readable description of the error that occurred, localized into the caller''s language.'
              type: string
            parameters:
              additionalProperties:
                description: Additional properties that an automated client may need in order to properly detect and handle the error.
                type: string
            type:
              description: 'A URI reference [RFC3986] that identifies the problem type.'
              format: uri
              type: string
          required:
            - detail
            - type
          type: object
        listOfDevices:
          properties:
            items:
              items:
                properties:
                  created_at:
                    type: string
                    format: date-time
                  id:
                    type: string
                  name:
                    type: string
                  os:
                    properties:
                      type:
                        enum:
                          - android
                          - ios
                          - linux
                          - mac
                          - windows
                        type: string
                      version:
                        type: string
                    type: object
                  properties:
                    additionalProperties:
                      description: >-
                        A collection of additional metadata describing the device. If a language is specified in the
                        collection of  properties the value must adhere to BCP 47 from the IETF
                        (https://tools.ietf.org/html/bcp47).
                      type: string
                    type: object
                  type:
                    enum:
                      - desktop
                      - mobile
                      - web
                    type: string
                  updated_at:
                    type: string
                    format: date-time
                type: object
              type: array
          type: object
        registrationResponse:
          properties:
            id:
              type: string
          required:
            - id
          type: object
      securitySchemes:
        citrixAuth:
          type: http
          scheme: CitrixAuth
        citrixCloudAuth:
          type: http
          scheme: CWSAuth